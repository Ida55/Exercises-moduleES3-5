<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Intermédiaire - Exo 9/11</title>
    <script>
    
    /* • Quand l'utilisateur CLIQUE sur le 1er paragraphe, le navigateur Internet affiche une boite de 
         dialogue pour lui demander s’il souhaite ouvrir une fenêtre vers Google.
         SI il clique sur « OK », le navigateur Internet ouvre une nouvelle fenêtre vers Google.
         SINON le navigateur Internet affiche une boite de dialogue avec un champ de saisie contenant le texte:
         « Veuillez saisir l'URL d'un site alternatif ».
       • SI l'utilisateur saisit un texte, ce texte est utilisé comme URL pour ouvrir une nouvelle fenêtre.
       • SINON un message s'affiche dans une boite de dialogue avec le texte: « Tant pis ! ». */


        function isValidURL(str) {
            var pattern = new RegExp('^(https?:\\/\\/)?'+ // protocol
                '((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|'+ // domain name
                '((\\d{1,3}\\.){3}\\d{1,3}))'+ // OR ip (v4) address
                '(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*'+ // port and path
                '(\\?[;&a-z\\d%_.~+=-]*)?'+ // query string
                '(\\#[-a-z\\d_]*)?$','i'); // fragment locator
                return !!pattern.test(str);
        }


        function openWindow() {
            var userWantsToGoToGoogle = confirm('Do you want to go to google?');
            
            if(userWantsToGoToGoogle){
                open("http://google.com", "Google", "directories=yes");
            } else {
                var saisie = prompt("Veuillez saisir l'URL d'un site alternatif");    
                while(saisie && !isValidURL(saisie)) {
                    alert('The URL you entered is NOT VALID, retry')
                    saisie = prompt("Veuillez saisir l'URL d'un site alternatif");
                }

                if(saisie){
                    open(`http://${saisie}`);
                } else {
                    alert("Tant pis!")
                }
            }
        }
      
    </script>
</head>
<body>

    <p onclick="openWindow()">Vous pouvez cliquer sur ce texte</p>

</body>
</html>
